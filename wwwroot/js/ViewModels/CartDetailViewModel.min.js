function CartDetailViewModel(n){var t=this,i;for(t.sending=ko.observable(!1),t.cart=n,i=0;i<t.cart.cartItems.length;i++)t.cart.cartItems[i].quantity=ko.observable(t.cart.cartItems[i].quantity).extend({subTotal:t.cart.cartItems[i].book.salePrice});t.cart.cartItems=ko.observableArray(t.cart.cartItems);t.cart.total=t.cart.cartItems.total();t.cartItemBeingChanged=null;t.deleteCartItem=function(n){t.sending(!0);t.cartItemBeingChanged=n;$.ajax({url:"/api/cartitems",type:"delete",contentType:"application/json",data:ko.toJSON(n)}).success(t.successfulDelete).error(t.errorSave).complete(function(){t.sending(!1)})};t.successfulDelete=function(){$(".body-content").prepend('<div class="alert alert-success"><strong>Success!<\/strong> The item has been deleted from your cart.<\/div>');t.cart.cartItems.remove(t.cartItemBeingChanged);cartSummaryViewModel.deleteCartItem(ko.toJS(t.cartItemBeingChanged));t.cartItemBeingChanged=null};t.errorSave=function(){$(".body-content").prepend('<div class="alert alert-danger"><strong>Error!<\/strong> There was an error updating the item to your cart.<\/div>')};t.fadeOut=function(n){$(n).fadeOut(1e3,function(){$(n).remove()})}}