function CartItemViewModel(n){var t=this;t.sending=ko.observable(!1);t.cartItem=n.cartItem;t.showButton=n.showButton;t.upsertCartItem=function(n){if(!$(n).valid())return!1;t.sending(!0);var i={id:t.cartItem.id,cartId:t.cartItem.cartId,bookId:t.cartItem.book.id,quantity:t.cartItem.quantity()};$.ajax({url:"/api/cartitems",type:t.cartItem.id===undefined?"post":"put",contentType:"application/json",data:ko.toJSON(i)}).success(t.successfulSave).error(t.errorSave).complete(function(){t.sending(!1)})};t.successfulSave=function(n){var i='<div class="alert alert-success"><strong>Success!<\/strong>The item has been ';i+=t.cartItem.id===undefined?"added to":"updated in";$(".body-content").prepend(i+" your cart.<\/div>");t.cartItem.id=n.id;cartSummaryViewModel.updateCartItem(ko.toJS(t.cartItem))};t.errorSave=function(){var n='<div class="alert alert-danger"><strong>Error!<\/strong>There was an error ';n+=t.cartItem.id===undefined?"adding":"updating";$(".body-content").prepend(n+" the item to your cart.<\/div>")}}ko.components.register("upsert-cart-item",{viewModel:CartItemViewModel,template:{element:"cart-item-form"}});